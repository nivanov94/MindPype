<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="bcipy package" href="bcipy.html" /><link rel="prev" title="Welcome to bcipy’s documentation!" href="index.html" />

    <meta name="generator" content="sphinx-5.1.1, furo 2022.06.21"/>
        <title>Getting Started with BCIPy - bcipy 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">bcipy 0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">bcipy 0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Getting Started with BCIPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="#setup-guide">Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="#basic-setup">Basic Setup</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="bcipy.html">bcipy package</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="bcipy.classes.html">bcipy.classes package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="bcipy.kernels.html">bcipy.kernels package</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="bcipy.kernels.utils.html">bcipy.kernels.utils package</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="getting-started-with-bcipy">
<h1>Getting Started with BCIPy<a class="headerlink" href="#getting-started-with-bcipy" title="Permalink to this heading">#</a></h1>
<p><strong>BCIPy</strong> is a Python-based software library designed for BCI researchers and developers that greatly simplifies the design and development of BCI data processing pipelines.
Users can create and implement custom processing pipelines to use alongside new or existing BCI interfaces.</p>
</section>
<section id="setup-guide">
<h1>Setup Guide<a class="headerlink" href="#setup-guide" title="Permalink to this heading">#</a></h1>
<p>Installing <em>pip</em> (Python Package Manager) is the first step to using BCIPy. &#64;NICK this is for you to describe :-}
Once Pip is installed, install BCIPy and its dependencies from Pypi</p>
<section id="basic-structure-of-bcipy">
<h2>Basic Structure of BCIPy<a class="headerlink" href="#basic-structure-of-bcipy" title="Permalink to this heading">#</a></h2>
<p>BCIPy uses a graph based model of processing pipelines:</p>
<a class="reference external image-reference" href="../_build/html/README.html"><img alt="../_static/Example_graph.png" src="../_static/Example_graph.png" /></a>
<p>Consider the above example. BCIPy has opted to model processing pipelines as <em>acyclic, directed graphs</em>, which individual
operations modeled as nodes within the graph, that contain kernels (or specific operations, ie. Add). Each node within the graph
is connected by edges, or data storage objects created to serve as inputs and outputs as nodes within the graph.</p>
<a class="reference external image-reference" href="../_build/html/README.html"><img alt="../_static/Graph.PNG" src="../_static/Graph.PNG" /></a>
<p>There are other important aspects of the graph, including a data source (a class within BCIPy). Filters/Classifiers are special types of kernels that
are so frequently used that they were made into their own objects, but still operate within kernels (more on this in the docs). As such,
BCIPy’s structure resembles this directed-graph-processing-pipeline model.</p>
<a class="reference external image-reference" href="../_build/html/README.html"><img alt="../_static/BCIPY_Structure.png" src="../_static/BCIPY_Structure.png" /></a>
</section>
</section>
<section id="basic-setup">
<h1>Basic Setup<a class="headerlink" href="#basic-setup" title="Permalink to this heading">#</a></h1>
<p><strong>The following guide will walkthrough the creation of a basic processing graph.</strong></p>
<section id="creating-a-session">
<h2>Creating a Session<a class="headerlink" href="#creating-a-session" title="Permalink to this heading">#</a></h2>
<p>The usage of the BCIP library is based on sessions, that is, a particular processing session. A Session object must be instantiated before building or executing a processing graph. Sessions are instantiated using the following syntax:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">example_session</span> <span class="o">=</span> <span class="n">Session</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="creating-a-graph">
<h2>Creating a Graph<a class="headerlink" href="#creating-a-graph" title="Permalink to this heading">#</a></h2>
<p>Once the session has been defined, the trial graph(s) to conduct the processing must be created.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trial_graph</span> <span class="o">=</span> <span class="n">Graph</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">example_session</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="creating-input-data">
<h2>Creating input data<a class="headerlink" href="#creating-input-data" title="Permalink to this heading">#</a></h2>
<p>Next, the location of your input data and training data should be provided. Trial Input data is most commonly
provided with an LSL stream (for online processing), or a MAT file (for batch processing);
while training data is most often provided either as a MAT file or the output of a execution (as a circle buffer/tensor object).
It may be easiest to understand the function of the BCIPY library using a MAT File input for input and training data. There are 3
types of MAT file inputs to be used for trial inputs, depending on how the data is organized. The epoched mat input is for MAT data that is separated by trial,
the class separated mat input is for data that is separated by class, and the continuous data mat input is for continuous data (raw eeg input).
For this setup, we’ll use continuous data for the input data, and a generic Tensor with mat data for the initialization data,
and use the following code to create the input/training data objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_data</span> <span class="o">=</span> <span class="n">BcipContinuousMat</span><span class="o">.</span><span class="n">create_continuous</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;input_data&#39;</span><span class="p">,</span> <span class="s1">&#39;input_labels&#39;</span><span class="p">,</span> <span class="s1">&#39;test_data\input_data.mat&#39;</span><span class="p">,</span> <span class="s1">&#39;test_data\input_labels.mat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">training_data</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">loadmat</span><span class="p">(</span><span class="s1">&#39;test_data\init_data.mat&#39;</span><span class="p">)[</span><span class="s1">&#39;init_data&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">training_labels</span> <span class="o">=</span> <span class="n">sio</span><span class="o">.</span><span class="n">loadmat</span><span class="p">(</span><span class="s1">&#39;test_data\init_labels.mat&#39;</span><span class="p">)[</span><span class="s1">&#39;labels&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#500 is the trial duration, 0 is the first sample of the data to be used, 4000 is the last sample, and 0 is the relative start</span>
</pre></div>
</div>
</section>
<section id="converting-data-to-bcipy-type">
<h2>Converting data to BCIPy type<a class="headerlink" href="#converting-data-to-bcipy-type" title="Permalink to this heading">#</a></h2>
<p>In the below step, it is critical to remember that inputs and outputs to graph/node must be a BCIPy built-in type
(Tensor, Array, or Scalar depending on the specific nodes being used), for both training data and trial data. Thus, we’ll
transform the input and training data to Tensors. For the input data, we’ll create a Tensor from a “handle”, which simply
means that it will be updated between trials from an external data source (the MAT file we imported), while the training
data is a Tensor we create from data and doesn’t need to be modified/polled.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_data</span> <span class="o">=</span> <span class="n">Tensor</span><span class="o">.</span><span class="n">create_from_handle</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span> <span class="n">input_data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">training_data_tensor</span> <span class="o">=</span> <span class="n">Tensor</span><span class="o">.</span><span class="n">create_from_data</span><span class="p">(</span><span class="n">session</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">init_data</span><span class="p">),</span> <span class="n">init_data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">training_labels_tensor</span> <span class="o">=</span> <span class="n">Tensor</span><span class="o">.</span><span class="n">create_from_data</span><span class="p">(</span><span class="n">session</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">init_labels</span><span class="p">),</span><span class="n">init_labels</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="defining-outputs">
<h2>Defining outputs<a class="headerlink" href="#defining-outputs" title="Permalink to this heading">#</a></h2>
<p>Along with the input and training data, we also need to define an output data object (to store the result of the processing graph), and edge object (which connect nodes/processing elements together). For this example, our last kernel will be a classifier (and its output a scalar), so we can define an output with the following:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="n">Scalar</span><span class="o">.</span><span class="n">create_from_value</span><span class="p">(</span><span class="n">session</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="creating-nodes">
<h2>Creating Nodes<a class="headerlink" href="#creating-nodes" title="Permalink to this heading">#</a></h2>
<p>This example will contain 3 nodes (a temporal filter, a CSP node, and an LDA classifier), thus, we will need 2 edges (think data holder</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">edges_to_connect_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">Tensor</span><span class="o">.</span><span class="n">create_virtual</span><span class="p">(</span><span class="n">session</span><span class="p">),</span> <span class="n">Tensor</span><span class="o">.</span><span class="n">create_virtual</span><span class="p">(</span><span class="n">session</span><span class="p">)]</span>
</pre></div>
</div>
<p>Once the edges have been created, nodes (processing elements) can be added to the graph. Nodes are the objects that get added to the graph, but nodes contain kernels, which are objects that conduct the data processing. To create a filter node and add it to the graph, use the following syntax:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">filter_object</span> <span class="o">=</span> <span class="n">Filter</span><span class="o">.</span><span class="n">create_butter</span><span class="p">(</span><span class="n">session</span><span class="p">,</span><span class="mi">4</span><span class="p">,(</span><span class="mi">8</span><span class="p">,</span><span class="mi">35</span><span class="p">),</span><span class="n">btype</span><span class="o">=</span><span class="s1">&#39;bandpass&#39;</span><span class="p">,</span><span class="n">fs</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span><span class="n">implementation</span><span class="o">=</span><span class="s1">&#39;sos&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># see filter class for parameter explanation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FilterKernel</span><span class="o">.</span><span class="n">add_filter_node</span><span class="p">(</span><span class="n">trial_graph</span><span class="p">,</span> <span class="n">input_data</span><span class="p">,</span> <span class="n">filter_object</span><span class="p">,</span> <span class="n">edges_to_connect_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># where input_data is the input to the node, filter_object is the specific filter that will conduct the processing, and edges_to_connect_nodes[0] is the Tensor where the output will be stored</span>
</pre></div>
</div>
<p>In a similar fashion, we can add our CSP and LDA Classifier Nodes:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CommonSpatialPatternKernel</span><span class="o">.</span><span class="n">add_uninitialized_CSP_node</span><span class="p">(</span><span class="n">trial_graph</span><span class="p">,</span> <span class="n">edges_to_connect_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">edges_to_connect_nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">training_data_tensor</span><span class="p">,</span> <span class="n">training_labels_tensor</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lda_object</span> <span class="o">=</span> <span class="n">Classifier</span><span class="o">.</span><span class="n">create_LDA</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ClassifierKernel</span><span class="o">.</span><span class="n">add_classifier_node</span><span class="p">(</span><span class="n">trial_graph</span><span class="p">,</span> <span class="n">edges_to_connect_nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">lda_object</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>In the above line, we set the training_data/labels input parameters to None. This is an important feature to remember about the BCIPy library;
if training data is provided for some upstream node (in this graph, the CSP node), the library will automatically compute the training data for
downstream nodes. If we wanted, we could’ve passed different training data, but opted not to for this example.</p>
</section>
<section id="verifying-a-graph">
<h2>Verifying a graph<a class="headerlink" href="#verifying-a-graph" title="Permalink to this heading">#</a></h2>
<p>Once the graph is built, the next step is to have it verified. Verification will schedule nodes, ensure that inputs and outputs
are the correct shape and type, and will determine whether any nodes are missing training data. This process can be started with a single command:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">verification_status</span> <span class="o">=</span> <span class="n">trial_graph</span><span class="o">.</span><span class="n">verify</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">verification_status</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>SUCCESS</p>
</div></blockquote>
</section>
<section id="initializing-the-graph">
<h2>Initializing the graph<a class="headerlink" href="#initializing-the-graph" title="Permalink to this heading">#</a></h2>
<p>The last step before we can use the graph is to have it initialized, which will initialize each node within the graph (train, compute filters, etc):
this process can also be started with one command:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">initialization_status</span> <span class="o">=</span> <span class="n">trial_graph</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">initialization_status</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>SUCCESS</p>
</div></blockquote>
</section>
<section id="executing-a-graph">
<h2>Executing a graph<a class="headerlink" href="#executing-a-graph" title="Permalink to this heading">#</a></h2>
<p>At this stage, the graph is ready to process data. During execution, we have a number of options, so we must first ask ourselves a number of questions.</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt>Do the trials you’re executing have a defined structure?</dt><dd><ul class="simple">
<li><p>If yes, it may be useful to define a trial_set before execution</p></li>
<li><p>If not, it is assumed that you’ll be executing trials indefinitely (ie. P300 speller setup)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Do you know the class labels of the trials you’re executing. For example, in some mental imagery experiments, we know what action will be completed before it occurs.</dt><dd><ul class="simple">
<li><p>If yes, you will not be able to use continuous data for this. You should use class separated / epoched data instead. At that point, you’ll be able to call execute like:</p></li>
</ul>
</dd>
</dl>
</li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">execution_status</span> <span class="o">=</span> <span class="n">trial_graph</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">class_label</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="execution-with-epochs-known-labels">
<h2>Execution with epochs, known labels<a class="headerlink" href="#execution-with-epochs-known-labels" title="Permalink to this heading">#</a></h2>
<p>If you were to use epoched data and a trial set, we could define a trial set using standard Python syntax:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trial_seq</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span> <span class="o">+</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span> <span class="c1">#4 trials of class 0, 4 of class 1</span>
</pre></div>
</div>
<p>Based on the provided data (4000 samples, each trial lasting 500 samples), we already know that only 8 trials can occur, so we can loop through the trial set like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">while</span> <span class="n">t_num</span> <span class="o">&lt;</span> <span class="mi">8</span> <span class="ow">and</span> <span class="n">sts</span> <span class="o">==</span> <span class="n">BcipEnums</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">y</span> <span class="o">=</span> <span class="n">trial_seq</span><span class="p">[</span><span class="n">t_num</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">sts</span> <span class="o">=</span> <span class="n">trial_graph</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="n">sts</span> <span class="o">==</span> <span class="n">BcipEnums</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">t_num</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">y_bar</span> <span class="o">=</span> <span class="n">s_out</span><span class="o">.</span><span class="n">data</span>
<span class="go">            print(&quot;Trial {}: Predicted label = {}&quot;.format(t_num+1,y_bar))</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Trial </span><span class="si">{</span><span class="n">t_num</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2"> raised error, status code: </span><span class="si">{</span><span class="n">sts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">break</span>
</pre></div>
</div>
<p><strong>Remember, this will only work with class separated/epoched data, not continuous mat data</strong></p>
</section>
<section id="execution-with-continuous-data-unknown-labels">
<h2>Execution with continuous data, unknown labels<a class="headerlink" href="#execution-with-continuous-data-unknown-labels" title="Permalink to this heading">#</a></h2>
<p>If we were to use continuous data and no class labels (ie. P300) we could loop through in a similar way, but execute trials without labels.
<strong>Remember, this only works with continuous data, labels are required for epoched/class separated data</strong></p>
<p>Based on the input data, we still know only 8 trials will occur, so we could use the following code.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t_num</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">while</span> <span class="n">t_num</span> <span class="o">&lt;</span> <span class="mi">8</span> <span class="ow">and</span> <span class="n">sts</span> <span class="o">==</span> <span class="n">BcipEnums</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">sts</span> <span class="o">=</span> <span class="n">trial_graph</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="n">sts</span> <span class="o">==</span> <span class="n">BcipEnums</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">t_num</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="go">            y_bar = s_out.data</span>
<span class="go">            print(&quot;Trial {}: Predicted label = {}&quot;.format(t_num+1,y_bar))</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Trial </span><span class="si">{</span><span class="n">t_num</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2"> raised error, status code: </span><span class="si">{</span><span class="n">sts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">break</span>
</pre></div>
</div>
<p>This concludes the setup guide, please see the other documentation, or examples available in our github repo for more examples/test scripts.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="bcipy.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">bcipy package</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Nicolas Ivanov, Aaron Lio
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>