{
  "session" : {
      "name" : "s1",
      "sources": {},
      "tensors" : [
	      "raw_eeg" : {
		"creation_method" : "create_from_handle",
		"shape" : [500,28],
		"source" : "eeg_stream"
	      },
	      "intra_class_var" : {
		"shape" : ["n_classes"]
	      },
	      "class_means" : {
		"shape" : ["n_classes","eeg_channels","eeg_channels"]
	      },
	      "v_tensor" : {
		"copies" : 20,
		"creatation_method" : "create_virtual"
	      }
      ],
      "scalars" : [
	      "label" : {
		"type" : "int"
	      },
	      "trial_score" : {
		"type" : "float"
	      },
	      "fisher_criterion" : {
		"type" : "float"
	      },
	      "n_classes" : {
		"creation_method" : "from_value",
		"type"  : "int",
		"value" : "n_classes"
	      },
	      "history_len" : {
		"creation_method" : "from_value",
		"type" : "int",
		"value" : "history_len"
	      },
              "classifier_prediction" : {
                "type" : "int"
              }
      ],
      "arrays" : [
	      "prev_cov_mats" : {
		"capacity" : "n_classes",
		"template" : {"type" : "CircleBuffer",
			      "capacity" : "history_len",
			      "template" : {"type" : "Tensor",
					    "shape" : ["eeg_channels","eeg_channels"]
					    }
			      }
              }
              "means" : {
                "capacity" : "b_classes",
                "template" : {"type" : "Tensor",
                              "shape" : ["eeg_channels","eeg_channels"]
                             }
              }
      ],
      "circle_buffers" : [
              "v_prev_class_covs" : {
                "copies" : 3,
                "creation_method" : "create_virtual"
              }
      ],
      "filters" : [
              "eeg_filter" : {
                "creation_method" : "create_butter",
                "order" : 4,
                "crit_frqs" : [8,30],
                "btype" : "bandpass",
                "implementation" : "sos",
                "fs" : 250
              }
      ],
      "blocks" : [
              "initialization_blocks" : {
                "copies" : 5,
                "pre" : [],
                "post" : [],
                "trial_processing" : [
                  { "name"    : "filtfilt",
                    "inputs"  : ["raw_eeg", "eeg_filter"],
                    "outputs" : ["v_tensor0"]
                  },
                  { "name"    : "covariance",
                    "inputs"  : ["v_tensor0"].
                    "outputs" : ["v_tensor1"]
                  },
                  {
                    "name"    : "extract",
                    "inputs"  : ["prev_cov_mats", 0, "label"],
                    "outputs" : ["v_prev_class_covs0"]
                  },
                  { "name"    : "enqueue",
                    "inputs"  : ["v_tensor1","v_prev_class_covs0"],
                    "outputs" : []
                  }
                ]
              },
              "feedback_blocks" : {
                "copies" : 15,
                "pre" : [
                  { "name"    : "extract",
                    "inputs"  : ["prev_cov_mats",0,0],
                    "outputs" : ["v_prev_class_covs0"]
                  },
                  { "name"    : "extract",
                    "inputs"  : ["prev_cov_mats",0,1],
                    "outputs" : ["v_prev_class_covs1"]
                  },
                  { "name"    : "extract",
                    "inputs"  : ["prev_cov_mats",0,2],
                    "outputs" : ["v_prev_class_covs2"]
                  },
                  { "name"    : "stack",
                    "inputs"  : ["v_prev_cov_mats0"],
                    "outputs" : ["v_tensor2"]
                  },
                  { "name"    : "stack",
                    "inputs"  : ["v_prev_cov_mats1"],
                    "outputs" : ["v_tensor3"]
                  }, 
                  { "name"    : "stack",
                    "inputs"  : ["v_prev_cov_mats2"],
                    "outputs" : ["v_tensor4"]
                  },
                  { "name"    : "riemann_mean",
                    "inputs"  : ["v_tensor2"],
                    "outputs" : ["means[0]"]
                  },
                  { "name"    : "riemann_mean",
                    "inputs"  : ["v_tensor3"],
                    "outputs" : ["means[1]"]
                  },
                  { "name"    : "riemann_mean",
                    "inputs"  : ["v_tensor4"],
                    "outputs" : ["means[2]"]
                  }
                ],
                "post" : [],
                "trial_processing" : [
                  { "name"    : "filtfilt",
                    "inputs"  : ["raw_eeg", "eeg_filter"],
                    "outputs" : ["v_tensor0"]
                  },
                  { "name"    : "covariance",
                    "inputs"  : ["v_tensor0"].
                    "outputs" : ["v_tensor1"]
                  },
                  {
                    "name"    : "extract",
                    "inputs"  : ["prev_cov_mats", 0, "label"],
                    "outputs" : ["v_prev_class_covs0"]
                  },
                  { "name"    : "enqueue",
                    "inputs"  : ["v_tensor1","v_prev_class_covs0"],
                    "outputs" : []
                  },
                  { "name"    : "stack",
                    "inputs"  : ["v_prev_cov_mats0"],
                    "outputs" : ["v_tensor5"]
                  },
                  { "name"    : "concatenation",
                    "inputs"  : ["v_tensor1","v_tensor5", 0],
                    "outputs" : ["v_tensor6"]
                  },
                  { "name"    : "riemann_mean",
                    "inputs"  : ["v_tensor6"],
                    "outputs" : ["v_tensor7"]
                  },
                  
  
 
